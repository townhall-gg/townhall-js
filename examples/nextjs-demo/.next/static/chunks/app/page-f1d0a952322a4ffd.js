(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{2303:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>c});var t=r(8481),n=r(8526),a=class extends Error{get isRateLimited(){return 429===this.status}get isNotFound(){return 404===this.status}get isFormInactive(){return 403===this.status&&this.message.includes("not accepting")}get isValidationError(){return 400===this.status}constructor(e,s,r,t){super(e),this.name="TownHallError",this.status=s,this.code=r||"UNKNOWN_ERROR",this.details=t}};function i(e,s){let[r,t]=(0,n.useState)(!1),[i,l]=(0,n.useState)(!1),[c,o]=(0,n.useState)(null),[d,u]=(0,n.useState)(null),h=(0,n.useRef)(function(e){var s,r,t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=null!=(s=n.baseUrl)?s:"https://townhall.gg",l=null!=(r=n.timeout)?r:3e4,c=null!=(t=n.fetch)?t:globalThis.fetch;if(!e)throw Error("TownHall: formId is required");let o="".concat(i,"/f/").concat(e);async function d(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=new AbortController,t=setTimeout(()=>r.abort(),l);try{var n;let i=await c(o,{method:"POST",headers:{"Content-Type":"application/json",...s.headers},body:JSON.stringify(e),signal:null!=(n=s.signal)?n:r.signal});if(clearTimeout(t),!i.ok){let e=await i.json().catch(()=>({})),s=new a(e.error||"Request failed with status ".concat(i.status),i.status,function(e){switch(e){case 400:return"VALIDATION_ERROR";case 403:return"FORBIDDEN";case 404:return"NOT_FOUND";case 429:return"RATE_LIMITED";case 500:return"SERVER_ERROR";default:return"UNKNOWN_ERROR"}}(i.status),e.details);return{success:!1,error:s}}let l=await i.json();return{success:!0,data:l}}catch(e){if(clearTimeout(t),e instanceof a)return{success:!1,error:e};if(e instanceof Error){if("AbortError"===e.name)return{success:!1,error:new a("Request timed out",408,"TIMEOUT")};return{success:!1,error:new a(e.message,0,"NETWORK_ERROR")}}return{success:!1,error:new a("Unknown error occurred",0,"UNKNOWN_ERROR")}}}async function u(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=await d(e,s);if(!r.success)throw r.error;return r.data}return{submit:d,submitOrThrow:u,formId:e,endpoint:o}}(e,s)),m=(0,n.useCallback)(async e=>{t(!0),o(null);let s=await h.current.submit(e);return(t(!1),s.success)?(u(s.data),l(!0),s.data):(o(s.error),null)},[]),x=(0,n.useCallback)(()=>{t(!1),l(!1),o(null),u(null)},[]),j=(0,n.useCallback)(e=>async s=>{s.preventDefault();let r=await e();await m(r)},[m]);return{isSubmitting:r,isSuccess:i,error:c,data:d,submit:m,reset:x,handleSubmit:j}}let l="demo-form-id";function c(){return(0,t.jsxs)("div",{className:"container",children:[(0,t.jsxs)("header",{className:"header",children:[(0,t.jsxs)("div",{className:"logo",children:[(0,t.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,t.jsx)("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),(0,t.jsx)("polyline",{points:"9 22 9 12 15 12 15 22"})]}),(0,t.jsx)("span",{children:"TownHall SDK"})]}),(0,t.jsx)("span",{className:"badge",children:"@townhall/react Demo"}),(0,t.jsx)("h1",{children:"Form Submission Demo"}),(0,t.jsx)("p",{children:"Interactive examples showing how to use the TownHall React SDK for form submissions with built-in state management."})]}),(0,t.jsxs)("div",{className:"grid",children:[(0,t.jsx)(o,{}),(0,t.jsx)(d,{})]}),(0,t.jsx)("footer",{className:"footer",children:(0,t.jsxs)("p",{children:["Built with"," ",(0,t.jsx)("a",{href:"https://github.com/townhall-gg/townhall-js",target:"_blank",rel:"noopener",children:"@townhall/react"})," \xb7 ",(0,t.jsx)("a",{href:"https://townhall.gg/docs/sdk",target:"_blank",rel:"noopener",children:"Documentation"})]})})]})}function o(){let{submit:e,isSubmitting:s,isSuccess:r,error:n,data:a,reset:c}=i(l),o=async s=>{s.preventDefault();let r=new FormData(s.currentTarget);await e(Object.fromEntries(r))};return r?(0,t.jsx)("div",{className:"card",children:(0,t.jsxs)("div",{className:"success",children:[(0,t.jsx)("div",{className:"successIcon",children:(0,t.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[(0,t.jsx)("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),(0,t.jsx)("polyline",{points:"22 4 12 14.01 9 11.01"})]})}),(0,t.jsx)("h3",{children:"Message Sent!"}),(0,t.jsx)("p",{children:(null==a?void 0:a.message)||"Thank you for your submission."}),(null==a?void 0:a.id)&&(0,t.jsxs)("div",{className:"submissionId",children:["ID: ",a.id]}),(0,t.jsx)("button",{onClick:c,className:"resetBtn",children:"Send another message"})]})}):(0,t.jsxs)("div",{className:"card",children:[(0,t.jsxs)("h2",{children:[(0,t.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,t.jsx)("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),"Contact Form"]}),(0,t.jsx)("p",{children:"Basic contact form with name, email, and message fields."}),(0,t.jsxs)("form",{onSubmit:o,className:"form",children:[(0,t.jsxs)("div",{className:"formGroup",children:[(0,t.jsx)("label",{htmlFor:"name",children:"Name"}),(0,t.jsx)("input",{type:"text",id:"name",name:"name",placeholder:"John Doe",required:!0})]}),(0,t.jsxs)("div",{className:"formGroup",children:[(0,t.jsx)("label",{htmlFor:"email",children:"Email"}),(0,t.jsx)("input",{type:"email",id:"email",name:"email",placeholder:"john@example.com",required:!0})]}),(0,t.jsxs)("div",{className:"formGroup",children:[(0,t.jsx)("label",{htmlFor:"message",children:"Message"}),(0,t.jsx)("textarea",{id:"message",name:"message",placeholder:"How can we help you?",required:!0})]}),n&&(0,t.jsxs)("div",{className:"error",children:[(0,t.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,t.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,t.jsx)("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),(0,t.jsx)("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]}),n.message]}),(0,t.jsxs)("button",{type:"submit",className:"submitBtn",disabled:s,children:[s&&(0,t.jsx)("span",{className:"spinner"}),s?"Sending...":"Send Message"]})]}),(0,t.jsx)("div",{className:"codeBlock",children:(0,t.jsx)("pre",{children:"const { submit, isSubmitting, isSuccess, error } = useTownHallForm('form-id')\n\nconst handleSubmit = async (e) => {\n  e.preventDefault()\n  const formData = new FormData(e.currentTarget)\n  await submit(Object.fromEntries(formData))\n}"})})]})}function d(){let{submit:e,isSubmitting:s,isSuccess:r,error:n,reset:a}=i(l),c=async s=>{s.preventDefault();let r=new FormData(s.currentTarget);await e({...Object.fromEntries(r),source:"newsletter"})};return r?(0,t.jsx)("div",{className:"card",children:(0,t.jsxs)("div",{className:"success",children:[(0,t.jsx)("div",{className:"successIcon",children:(0,t.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[(0,t.jsx)("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),(0,t.jsx)("polyline",{points:"22 4 12 14.01 9 11.01"})]})}),(0,t.jsx)("h3",{children:"You're Subscribed!"}),(0,t.jsx)("p",{children:"Thanks for subscribing to our newsletter."}),(0,t.jsx)("button",{onClick:a,className:"resetBtn",children:"Subscribe another email"})]})}):(0,t.jsxs)("div",{className:"card",children:[(0,t.jsxs)("h2",{children:[(0,t.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,t.jsx)("path",{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"}),(0,t.jsx)("polyline",{points:"22,6 12,13 2,6"})]}),"Newsletter Signup"]}),(0,t.jsx)("p",{children:"Simple email-only form with additional metadata."}),(0,t.jsxs)("form",{onSubmit:c,className:"form",children:[(0,t.jsxs)("div",{className:"formGroup",children:[(0,t.jsx)("label",{htmlFor:"newsletter-email",children:"Email address"}),(0,t.jsx)("input",{type:"email",id:"newsletter-email",name:"email",placeholder:"you@example.com",required:!0})]}),n&&(0,t.jsxs)("div",{className:"error",children:[(0,t.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,t.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,t.jsx)("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),(0,t.jsx)("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]}),n.message]}),(0,t.jsxs)("button",{type:"submit",className:"submitBtn",disabled:s,children:[s&&(0,t.jsx)("span",{className:"spinner"}),s?"Subscribing...":"Subscribe"]})]}),(0,t.jsx)("div",{className:"codeBlock",children:(0,t.jsx)("pre",{children:"// Add extra metadata with form data\nawait submit({\n  ...Object.fromEntries(formData),\n  source: 'newsletter',\n  subscribedAt: new Date().toISOString()\n})"})})]})}},6304:(e,s,r)=>{Promise.resolve().then(r.bind(r,2303))}},e=>{e.O(0,[59,498,358],()=>e(e.s=6304)),_N_E=e.O()}]);